{"version":3,"file":"photo-story.js","sources":["../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArray.js","../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/toConsumableArray.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../src/js/shared/utils.js","../../src/js/prototypes/dom.js","../../src/js/prototypes/events.js","../../src/js/prototypes/event-emitter.js","../../src/js/prototypes/fullscreen.js","../../src/js/prototypes/animation/fadeIn.js","../../src/js/prototypes/animation/fadeOut.js","../../src/js/prototypes/animation/index.js","../../src/js/prototypes/slide/setSlides.js","../../src/js/prototypes/slide/index.js","../../src/js/modules/navigation.js","../../src/js/modules/resize.js","../../src/js/modules/video.js","../../src/js/modules/index.js","../../src/js/shared/extendModule.js","../../src/js/defaults.js","../../src/js/core.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","const typeName = [\r\n    'image',\r\n    'video',\r\n    'youtube',\r\n    'vimeo',\r\n    'dailymotion'\r\n];\r\n\r\nfunction checkPassiveListener() {\r\n    let supportsPassive = false;\r\n    try {\r\n        let opts = Object.defineProperty({}, 'passive', {\r\n            get: function() {\r\n                supportsPassive = true;\r\n            }\r\n        });\r\n        window.addEventListener(\"testPassive\", null, opts);\r\n        window.removeEventListener(\"testPassive\", null, opts);\r\n    } catch (e) {}\r\n    return supportsPassive;\r\n}\r\n\r\nfunction deleteProps(obj) {\r\n    const object = obj;\r\n    Object.keys(object).forEach((key) => {\r\n        try {\r\n            object[key] = null;\r\n        } catch (e) { }\r\n        try {\r\n            delete object[key];\r\n        } catch (e) { }\r\n    });\r\n}\r\n\r\nfunction extend(...args) {\r\n    let obj = {};\r\n    const options = Object(args[0]);\r\n    const defaults = args[args.length - 1];\r\n\r\n\tobj = Object.assign(obj, ...args);\r\n    for (let key in defaults) {\r\n\t\tif (key === 'gallery' && isObject(options[key])) {\r\n            const gallery = {\r\n                gallery: options[key]\r\n            }\r\n            Object.assign(defaults[key], gallery[key]);\r\n\r\n\t\t} else {\r\n            if (isObject(defaults[key]) && isObject(options[key])) {\r\n\t\t\t\tObject.assign(defaults[key], options[key]);\r\n\t\t\t}\r\n        }\r\n\t}\r\n    return obj;\r\n}\r\n\r\nfunction getCurrentObj(list, el) {\r\n    const currentObj = {};\r\n\r\n    if (list && list.size) {\r\n        Array.from(list.entries()).forEach(obj => {\r\n            const key = obj[0];\r\n            const values = obj[1];    \r\n            if (values.indexOf(el) > -1) {\r\n                currentObj['index'] = values.indexOf(el);\r\n                currentObj['id'] = key;\r\n            }\r\n        });\r\n\r\n    } else {\r\n        const rel = el.getAttribute('rel');\r\n        currentObj['index'] = 0;\r\n        if (rel) {\r\n            currentObj['id'] = rel;\r\n        } else if (el.dataset.galleryId) {\r\n            currentObj['id'] = el.dataset.galleryId;\r\n        }\r\n    }\r\n\r\n    return currentObj;\r\n}\r\n\r\nfunction getFileType(value) {\r\n    const imgReg = /\\.(gif|jpe?g|tiff?|png|webp|bmp)$/i;\r\n    const videoReg = /\\.(mp4|mkv|wmv|m4v|mov|avi|flv|webm|flac|mka|m4a|aac|ogg)$/i;\r\n\r\n    if (imgReg.test(value)) {\r\n        return typeName[0];\r\n    } else if (videoReg.test(value)) {\r\n        return typeName[1];\r\n    } else if (value.indexOf('youtu') > -1) {\r\n        return typeName[2];\r\n    } else if (value.indexOf('vimeo') > -1) {\r\n        return typeName[3];\r\n    } else if (value.indexOf('dailymotion') > -1) {\r\n        return typeName[4];\r\n    }\r\n}\r\n\r\nfunction getElement(obj) {\r\n    if (isElement(obj)) { \r\n        return obj.jquery ? obj[0] : obj;\r\n    }  \r\n    if (typeof obj === 'string' && obj.length > 0) {\r\n        return document.querySelectorAll(obj);\r\n    }  \r\n    return null\r\n}\r\n\r\nfunction getGallery(group) {\r\n\tconst gallery = {};\r\n\r\n\tArray.from(group.entries()).forEach(obj => {\r\n        const array = [];\r\n        const key = obj[0];\r\n        const values = obj[1];\r\n\r\n        values.forEach(val => {\r\n            const o = {\r\n                main: val.getAttribute('href'),\r\n                thumb: getThumb(val),\r\n                title: getTitle(val),\r\n                captions: val.dataset.psCaptions,\r\n            };\r\n            array.push(o);\r\n        });\r\n\r\n        gallery[key] = array;\r\n\t});\r\n\r\n    return gallery;\r\n}\r\n\r\nfunction getGalleryGroup(el) {\r\n    const group = groupBy(el, (element => {\r\n        const rel = element.getAttribute('rel');\r\n        if (rel && rel !== false && rel !== 'nofollow') {\r\n            return rel;\r\n        }\r\n    }));\r\n\r\n    return group;\r\n}\r\n\r\nfunction getGalleryType(obj) {\r\n    for (const key in obj) {\r\n        if (Object.hasOwnProperty.call(obj, key)) {\r\n            const gallery = obj[key];\r\n            Array.from(gallery).forEach(gal => {\r\n                gal.type = getFileType(gal.main);\r\n                if (!gal.thumb) {\r\n                    gal.thumb = gal.main;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    return obj;\r\n}\r\n\r\nfunction getRel(el) {\r\n    const rel = el.getAttribute('rel');\r\n    if (rel && rel !== false && rel !== 'nofollow') {\r\n        return rel;\r\n    } else {\r\n        return 'gallery';\r\n    }\r\n}\r\n\r\nfunction getThumb(el) {\r\n    let img = el.getElementsByTagName('img');\r\n    \r\n    if (img = isCollection(img)) {\r\n        return img.getAttribute('src');\r\n    } else if (typeof el.dataset.psThumb !== 'undefined') {\r\n        return el.dataset.psThumb;\r\n    } else {\r\n        return el.getAttribute('href');\r\n    }\r\n}\r\n\r\nfunction getTitle(el) {\r\n    const title = el.getAttribute('title');\r\n    if (title) {\r\n        return title;\r\n    } else if (typeof el.dataset.psTitle !== 'undefined') {\r\n        return el.dataset.psTitle;\r\n    }\r\n}\r\n\r\nfunction groupBy(list, keyGetter) {\r\n    const map = new Map();\r\n    list.forEach((item) => {\r\n         const key = keyGetter(item) || getRel(item);\r\n         const collection = map.get(key);\r\n         if (!collection) {\r\n             map.set(key, [item]);\r\n         } else {\r\n             collection.push(item);\r\n         }\r\n    });\r\n    return map;\r\n}\r\n\r\nfunction isElement(obj) {\r\n    if (!obj || typeof obj !== 'object') {\r\n        return false;\r\n    }  \r\n    if (typeof obj.jquery !== 'undefined') {\r\n        obj = obj[0];\r\n    }    \r\n    return typeof obj.nodeType !== 'undefined'\r\n}\r\n\r\nfunction isObject(obj) {\r\n    return (\r\n        typeof obj === 'object' &&\r\n        obj !== null &&\r\n        obj.constructor &&\r\n        Object.prototype.toString.call(obj).slice(8, -1) === 'Object'\r\n    );\r\n}\r\n\r\nfunction isCollection(collection) {\r\n    if (collection instanceof HTMLCollection && HTMLCollection.prototype.isPrototypeOf(collection)) {\r\n        return collection = collection[0];\r\n    }\r\n}\r\n\r\n\r\nexport {\r\n    checkPassiveListener,\r\n    deleteProps,\r\n    extend,\r\n    getCurrentObj,\r\n    getElement,\r\n    getGallery,\r\n    getGalleryGroup,\r\n    getGalleryType,\r\n    isObject\r\n};","export default {\r\n    createEl(classes, tag) {\r\n        const el = document.createElement(tag || 'div');\r\n        if (classes) {\r\n            classes.split(' ').forEach((className) => {\r\n                this.addClass(el, className);\r\n            });\r\n        }\r\n        return el;\r\n    },\r\n\r\n    counter() {\r\n        const counter = document.getElementById(this.getIdName('current_slide'));\r\n        counter.innerHTML = this.currentIndex + 1;\r\n    },\r\n\r\n    downloadURL() {\r\n        const item = this.options.gallery[this.galleryId][this.currentIndex];\r\n        this.tools.download.href = item.main;\r\n    },\r\n\r\n    addClass(el, className) {\r\n        if (!this.hasClass(el, className) ) {\r\n            el.className += (el.className ? ' ' : '') + this.getClassName(className);\r\n        }\r\n    },\r\n\r\n    hasClass(el, className) {\r\n        return el.className && new RegExp('(^|\\\\s)' + this.getClassName(className) + '(\\\\s|$)').test(el.className);\r\n    },\r\n\r\n    removeClass(el, className) {\r\n        var reg = new RegExp('(\\\\s|^)' + this.getClassName(className) + '(\\\\s|$)');\r\n        el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, ''); \r\n    },\r\n\r\n    getCSSVariable(varName) {\r\n        const root = window.getComputedStyle(document.documentElement);\r\n        const property = '--ps-' + varName;\r\n        return root.getPropertyValue(property).replace(' ', '');\r\n    },\r\n\r\n    setCSS(el, varName, varValue) {\r\n        el.style.setProperty(varName, varValue);\r\n    },\r\n\r\n    getClassName(name) {\r\n        if (name && this.getCSSVariable('prefix')) {\r\n            return this.getCSSVariable('prefix') + name;\r\n        }\r\n        \r\n        return name;\r\n    },\r\n\r\n    getIdName(name) {\r\n        if (name && this.getCSSVariable('prefix')) {\r\n            let prefix = this.getCSSVariable('prefix');\r\n            prefix = prefix.replace(\"-\", \"_\");\r\n            return prefix + name;\r\n        }\r\n\r\n        return name;\r\n    },\r\n\r\n    getChildByClassName(name) {\r\n        const child = this.el.children;\r\n        const childEl = [];\r\n\r\n        for (let i = 0; i < child.length; i++) {\r\n            if (this.hasClass(child[i], name)) {\r\n                childEl.push(child[i]);\r\n            }\r\n        }\r\n\r\n        return childEl;\r\n    }\r\n};","import { checkPassiveListener } from '../shared/utils';\r\n\r\nexport default {\r\n    attachEvents(element, events, handler) {\r\n        events.split(' ').forEach((event) => {\r\n            if (!element.namespaces) {\r\n                element.namespaces = {};\r\n            }\r\n\r\n            const touch = ['touchstart', 'touchmove'].indexOf(event) >= 0;\r\n            const passive = checkPassiveListener();\r\n            let param = false;\r\n\r\n            if (touch && passive) {\r\n                param = { passive: true };\r\n            }\r\n\r\n            element.namespaces[event] = handler;\r\n            element.addEventListener(event, handler, param);\r\n        });\r\n    },\r\n\r\n    detachEvents(element, events) {\r\n        events.split(' ').forEach((event) => {\r\n            if(element.namespaces && element.namespaces[event]) {\r\n                element.removeEventListener(event, element.namespaces[event]);\r\n                delete element.namespaces[event];\r\n            }\r\n        });\r\n    }\r\n    \r\n}","export default {\r\n    on(events, handler) {\r\n        if (typeof handler !== 'function') {\r\n            return this;\r\n        }\r\n        \r\n        events.split(' ').forEach((event) => {\r\n            if (!this.eventsListeners[event]) {\r\n                this.eventsListeners[event] = [];\r\n            }\r\n            this.eventsListeners[event].push(handler);\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    off(events, handler) {\r\n        if (!this.eventsListeners) {\r\n            return this;\r\n        }\r\n\r\n        events.split(' ').forEach((event) => {\r\n            if (typeof handler === 'undefined') {\r\n                this.eventsListeners[event] = [];\r\n            } else if (this.eventsListeners[event]) {\r\n                this.eventsListeners[event].forEach((eventHandler, index) => {\r\n                    if (eventHandler === handler) {\r\n                        this.eventsListeners[event].splice(index, 1);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        return this;\r\n    },\r\n\r\n    emit(event, data) {\r\n        if (!this.eventsListeners) {\r\n            this.eventsListeners = {};\r\n        }\r\n        // console.log('this.eventsListeners :>> ', this.eventsListeners);\r\n\r\n        if (typeof event === 'string') {\r\n            data = event;\r\n        }\r\n\r\n        if (this.eventsListeners && this.eventsListeners[event]) {\r\n            this.eventsListeners[event].forEach((eventHandler) => {\r\n                eventHandler(data);\r\n            });\r\n        }\r\n\r\n        return this;\r\n    }\r\n}","export default {\r\n    enterFullscreen() {\r\n        const doc = document;\r\n        const docEl = doc.documentElement;\r\n        const enter = docEl.requestFullScreen || docEl.webkitRequestFullScreen || docEl.mozRequestFullScreen || docEl.msRequestFullscreen;\r\n\r\n        if (enter) {\r\n            enter.call(docEl);\r\n        } else if (typeof window.ActiveXObject !== \"undefined\") { // Older IE.\r\n            var shell = new ActiveXObject(\"WScript.Shell\");\r\n            if (shell !== null) {\r\n                shell.SendKeys(\"{F11}\");\r\n            }\r\n        }\r\n\r\n        this.tools.fullscreen.innerHTML = this.options.template.exitFullscreen;\r\n    },\r\n    \r\n    exitFullscreen() {\r\n        const doc = document;\r\n        const exit = doc.cancelFullScreen || doc.webkitCancelFullScreen || doc.mozCancelFullScreen || doc.exitFullscreen || doc.webkitExitFullscreen;\r\n\r\n        if (exit) {\r\n            exit.call(doc);\r\n        } else if (typeof window.ActiveXObject !== \"undefined\") { // Older IE.\r\n            const shell = new ActiveXObject(\"WScript.Shell\");\r\n            if (shell !== null) {\r\n                shell.SendKeys(\"{F11}\");\r\n            }\r\n        }\r\n\r\n        this.tools.fullscreen.innerHTML = this.options.template.enterFullscreen;\r\n    },\r\n\r\n    fullscreen() {\r\n        const isEnter = (document.fullScreenElement && document.fullScreenElement !== null) ||  (document.mozFullScreen || document.webkitIsFullScreen);\r\n\r\n        if (isEnter) {\r\n            this.exitFullscreen();\r\n        } else {\r\n            this.enterFullscreen();\r\n        }\r\n    }\r\n}","export default function fadeIn(el, cb, duration) {\r\n    if (!el) {\r\n        return false;\r\n    }\r\n    \r\n    if (!duration) {\r\n        duration = 300;\r\n    }\r\n\r\n    el.style.opacity = 0;\r\n    el.style.display = 'block';\r\n    \r\n    const opacity = 1;\r\n    const step = (16.66666 * opacity) / duration;\r\n\r\n    const fade = () => {\r\n        let currentOpacity = parseFloat(el.style.opacity);\r\n\r\n        if (!((currentOpacity += step) > opacity)) {\r\n            el.style.opacity = currentOpacity;\r\n            requestAnimationFrame(fade);\r\n        } else {\r\n            el.style.opacity = opacity;\r\n            cb && cb.call();\r\n        }\r\n    };\r\n\r\n    fade();\r\n}","export default function fadeOut(el, cb, duration) {\r\n    if (!el) {\r\n        return false;\r\n    }\r\n    \r\n    if (!duration) {\r\n        duration = 300;\r\n    }\r\n\r\n    el.style.opacity = 1;\r\n    const opacity = 0;\r\n    const step = 16.66666 / duration;\r\n\r\n    const fade = () => {\r\n        let currentOpacity = parseFloat(el.style.opacity || 1);\r\n\r\n        if ((currentOpacity -= step) < opacity) {\r\n            el.style.opacity = opacity;\r\n            el.style.display = 'none';\r\n            cb && cb.call();\r\n\r\n        } else {\r\n            el.style.opacity = currentOpacity;\r\n            requestAnimationFrame(fade);\r\n        }\r\n    };\r\n\r\n    fade();\r\n}","import fadeIn from './fadeIn';\r\nimport fadeOut from './fadeOut';\r\n\r\nexport default {\r\n    fadeIn,\r\n    fadeOut,\r\n}","export default function setSlides(gallery) {\r\n    console.log('object :>> ', gallery);\r\n}","import setSlides from './setSlides';\r\n\r\nexport default {\r\n    setSlides,\r\n}","export default function Navigation({ps, moduleDefaults, on, emit}) {\r\n\r\n    moduleDefaults({\r\n        navigation: {\r\n            next: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n                    <path fill=\"currentColor\" d=\"M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z\"/>\r\n                </svg>`,\r\n            prev: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n                    <path fill=\"currentColor\" d=\"M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z\"/>\r\n                </svg>`\r\n        }\r\n    });\r\n\r\n    const options = ps.options;\r\n    if (!options.navigation.enable) {\r\n        return false;\r\n    }\r\n\r\n    ps.navigation = {\r\n        nextEl: null,\r\n        prevEl: null,\r\n    }\r\n\r\n    function init() {\r\n        let {nextEl, prevEl} = ps.navigation;\r\n        \r\n        nextEl = ps.createEl('button button--next', 'button');\r\n        prevEl = ps.createEl('button button--prev', 'button');\r\n        nextEl.type = prevEl.type = 'button';\r\n        nextEl.innerHTML = options.navigation.next;\r\n        prevEl.innerHTML = options.navigation.prev;\r\n        nextEl.ariaLabel = 'Next slide';\r\n        prevEl.ariaLabel = 'Prev slide';\r\n\r\n        ps.attachEvents(nextEl, ps.events.click, () => {\r\n            ps.currentIndex++;\r\n            ps.counter();\r\n        });\r\n        \r\n        ps.attachEvents(prevEl, ps.events.click, () => {\r\n            ps.currentIndex--;\r\n            ps.counter();\r\n        });\r\n\r\n        ps.el.append(nextEl, prevEl);\r\n        Object.assign(ps.navigation, {nextEl, prevEl});\r\n    }\r\n\r\n    function destroy() {\r\n        const navigation = ps.navigation;\r\n\r\n        Object.keys(navigation).forEach((nav) => {\r\n            ps.detachEvents(navigation[nav], ps.events.click);\r\n            navigation[nav] = null;\r\n        });\r\n    }\r\n\r\n    on('init', () => {\r\n        init();\r\n    });\r\n\r\n    on('destroy', () => {\r\n        destroy();\r\n    });\r\n    \r\n}","export default function Resize() {}","export default function Video({ps, moduleDefaults}) {\r\n\r\n    moduleDefaults({\r\n        video: {\r\n            enable: true,\r\n            autoplay: false,\r\n            frame: 'SD'\r\n        }\r\n    });\r\n    \r\n\r\n    // extendModuleOptions({\r\n    //     navigation: {\r\n    //         next: '<svg class=\"next\"></svg>',\r\n    //         prev: '<svg class=\"prev\"></svg>',\r\n    //     }\r\n    // });\r\n    \r\n}","import Navigation from \"./navigation\";\r\nimport Resize from \"./resize\";\r\nimport Video from \"./video\";\r\n\r\nconst Modules = [\r\n    Navigation,\r\n    Resize,\r\n    Video\r\n];\r\n\r\nexport default {\r\n    Modules\r\n};","import { extend } from './utils';\r\n\r\nexport default function extendModuleDefaults(...args) {\r\n    return function extendOptions(obj = {}) {\r\n        const moduleOptionName = Object.keys(obj)[0];\r\n        const moduleOptions = obj[moduleOptionName];\r\n        const options = args[0];\r\n        const ps = args[args.length - 1];\r\n\r\n        if (typeof moduleOptions !== 'object' || moduleOptions === null) {\r\n            return false;\r\n        }\r\n\r\n        if (options[moduleOptionName] === true) {\r\n            options[moduleOptionName] = { enable: true };\r\n        }\r\n\r\n        if (typeof options[moduleOptionName] === 'object' && !('enable' in options[moduleOptionName])) {\r\n            options[moduleOptionName].enabled = true;\r\n        }\r\n\r\n        if (options[moduleOptionName] === false) {\r\n            options[moduleOptionName] = { enable: false };\r\n        }\r\n\r\n        ps.options = extend(options, args[1], obj);\r\n    }\r\n}","export default {\r\n    gallery: {},\r\n\r\n    // Lightbox options\r\n    fullscreen: true,\r\n    showCounter: true,\r\n    download: true,\r\n    captions: false,\r\n    loop: false,\r\n\r\n    // Bullets\r\n    bullets: false,\r\n\r\n    // Set image loader and amount of preload image\r\n    loader: true,\r\n    preload: 1,\r\n\r\n    // Effects\r\n    effect: 'default', // 'default' | 'Slide' | 'fade' | 'scale'\r\n\r\n    // Right to left\r\n    rtl: false,\r\n\r\n    template: {\r\n        enterFullscreen: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"currentColor\" d=\"M20 3h2v6h-2V5h-4V3h4zM4 3h4v2H4v4H2V3h2zm16 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"/>\r\n        </svg>`,\r\n        exitFullscreen: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"currentColor\" d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"/>\r\n        </svg>`,\r\n        download: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"currentColor\" d=\"M3 19h18v2H3v-2zm10-5.828L19.071 7.1l1.414 1.414L12 17 3.515 8.515 4.929 7.1 11 13.17V2h2v11.172z\"/>\r\n        </svg>`,\r\n        close: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"currentColor\" d=\"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z\"/>\r\n        </svg>`,\r\n    }\r\n}","import {\r\n    extend,\r\n    deleteProps, \r\n    getCurrentObj, \r\n    getElement, \r\n    getGallery,\r\n    getGalleryGroup,\r\n    getGalleryType,\r\n    isObject } from './shared/utils';\r\n\r\n// Prototypes\r\nimport dom from './prototypes/dom';\r\nimport events from './prototypes/events';\r\nimport eventEmitter from './prototypes/event-emitter';\r\nimport fullscreen from './prototypes/fullscreen';\r\nimport animation from './prototypes/animation';\r\nimport slide from './prototypes/slide';\r\n\r\n// Modules\r\nimport Modules from './modules/index';\r\n\r\nimport extendModuleDefaults from './shared/extendModule';\r\nimport defaults from './defaults';\r\n\r\nconst prototypes = {\r\n    dom,\r\n    events,\r\n    eventEmitter,\r\n    fullscreen,\r\n    animation,\r\n    slide,\r\n};\r\n\r\n\r\nclass PhotoStory {\r\n    constructor(...args) {\r\n        const initial = args[0];\r\n        \r\n        if (initial.constructor && isObject(initial)) {\r\n            [this.options, this.element] = args;\r\n        } else {\r\n            [this.element, this.options] = args;\r\n        }\r\n        \r\n        if (this.element) {\r\n            if (typeof this.element === 'string' || this.element instanceof String) {\r\n                this.element = getElement(this.element);\r\n            }\r\n\t\t} else {\r\n            alert(\"Element is undefined\");\r\n            return false;\r\n        }\r\n        \r\n        this.options = extend(this.options, defaults);\r\n        this.currentIndex = 0;\r\n        this.originalGallery = {};\r\n        this.eventsListeners = {};\r\n        this.modules = [...this.__modules];\r\n        \r\n        const ps = this;\r\n        this.modules.forEach((initial) => {\r\n            initial({\r\n                ps,\r\n                moduleDefaults: extendModuleDefaults(this.options, defaults, ps),\r\n                on: ps.on.bind(ps),\r\n                off: ps.off.bind(ps),\r\n                emit: ps.emit.bind(ps)\r\n            });\r\n        });\r\n        \r\n        const links = [];\r\n        this.element.forEach(el => {\r\n            if (el && el.nodeName === 'A') {\r\n                links.push(el);\r\n            } else {\r\n                const anchor = el.getElementsByTagName('a');\r\n                links.push(...anchor);\r\n            }\r\n        });\r\n        \r\n        // Build gallery object\r\n        let gallery = this.options.gallery;\r\n\r\n        if (gallery && Object.keys(gallery).length === 0 && Object.getPrototypeOf(gallery) === Object.prototype) {\r\n            this.originalGallery = getGalleryGroup(links);\r\n            gallery = getGallery(this.originalGallery);\r\n        }\r\n        // Bind type of gallery with gallery\r\n        gallery = getGalleryType(gallery);\r\n        Object.assign(this.options.gallery, gallery);\r\n\r\n        this.events = {\r\n            click: 'click touchstart'\r\n        };\r\n        \r\n        links.forEach(link => {\r\n            this.attachEvents(link, this.events.click, (event) => {\r\n                event.preventDefault();\r\n\r\n                this.currentIndex = getCurrentObj(this.originalGallery, event.currentTarget).index;\r\n                this.galleryId = getCurrentObj(this.originalGallery, event.currentTarget).id;\r\n                this.open();\r\n            });\r\n        });\r\n    }\r\n\r\n    build() {\r\n        const gallery = this.options.gallery[this.galleryId];\r\n        const backdrop = this.createEl('lightbox__backdrop');\r\n\r\n        this.el = this.createEl('lightbox');\r\n        this.el.append(backdrop, this.toolbar(gallery));\r\n        this.setSlides(gallery);\r\n        document.body.appendChild(this.el);\r\n        this.fadeIn(backdrop);\r\n    }\r\n\r\n    toolbar(gallery) {\r\n        this.tools = {};\r\n        const toolbar = this.createEl('lightbox__toolbar');\r\n        const options = this.createEl('lightbox__toolbar__options');\r\n\r\n        this.tools.close = this.createEl('button button--close', 'button');\r\n        this.tools.close.type = 'button';\r\n        this.tools.close.ariaLabel = 'Close gallery';\r\n        this.tools.close.innerHTML = this.options.template.close;\r\n        this.attachEvents(this.tools.close, this.events.click, () => {\r\n            this.close();\r\n        });\r\n\r\n        if (this.options.showCounter) {\r\n            const galleryItems = gallery.length;\r\n            const html = `<span id=\"${this.getIdName('current_slide')}\">${ps.currentIndex + 1}</span><span> / ${galleryItems}</span>`;\r\n            this.tools.counter = this.createEl('lightbox__counter');\r\n            this.tools.counter.innerHTML = html;\r\n            toolbar.appendChild(this.tools.counter);\r\n        }\r\n\r\n        if (this.options.fullscreen) {\r\n            this.tools.fullscreen = this.createEl('button button--fullscreen', 'button');\r\n            this.tools.fullscreen.type = 'button';\r\n            this.tools.fullscreen.ariaLabel = 'Fullscreen';\r\n            this.tools.fullscreen.innerHTML = this.options.template.enterFullscreen;\r\n            this.attachEvents(this.tools.fullscreen, this.events.click, () => {\r\n                this.fullscreen();\r\n            });\r\n            options.appendChild(this.tools.fullscreen);\r\n        }\r\n\r\n        if (this.options.download) {\r\n            this.tools.download = this.createEl('button button--download', 'a');\r\n            this.downloadURL();\r\n            this.tools.download.innerHTML = this.options.template.download;\r\n            this.tools.download.download = '';\r\n            this.tools.download.ariaLabel = 'Download image';\r\n            options.appendChild(this.tools.download);\r\n        }\r\n\r\n        // Append elements\r\n        options.appendChild(this.tools.close);\r\n        toolbar.appendChild(options);\r\n        \r\n        return toolbar;\r\n    }\r\n\r\n    init() {\r\n        if (!isObject(this)) {\r\n            alert(\"Photo story is undefined\");\r\n            return false;\r\n        }\r\n\r\n        this.emit('beforeInit');\r\n        this.build();\r\n        this.emit('init');\r\n        this.emit('afterInit');\r\n    }\r\n\r\n    open() {\r\n        if (!isObject(this.options.gallery)) {\r\n            alert(\"Gallery is undefined\");\r\n            return false;\r\n        }\r\n\r\n        if (!this.galleryId) {\r\n            this.galleryId = Object.keys(this.options.gallery)[0];\r\n        }\r\n\r\n        this.init();\r\n    }\r\n\r\n    close() {\r\n        this.exitFullscreen();\r\n        \r\n        this.currentIndex = 0;\r\n        this.galleryId = null;\r\n        \r\n        \r\n        Object.keys(this.tools).forEach((tool) => {\r\n            this.detachEvents(this.tools[tool], ps.events.click);\r\n            this.tools[tool] = null;\r\n        });\r\n        \r\n        this.tools = null;\r\n\r\n        const toolbar = this.getChildByClassName('lightbox__toolbar')[0];\r\n        const backdrop = this.getChildByClassName('lightbox__backdrop')[0];\r\n        const buttons = this.getChildByClassName('button');\r\n        \r\n        toolbar.style.opacity = 0;\r\n        buttons.forEach(button => {\r\n            button.style.opacity = 0;\r\n        });\r\n\r\n        this.fadeOut(backdrop, () => {\r\n            document.body.removeChild(this.el);\r\n        });\r\n    }\r\n\r\n    destroy() {\r\n        this.emit('destroy');\r\n\r\n        // Detach emitter events\r\n        Object.keys(this.eventsListeners).forEach((eventName) => {\r\n            this.off(eventName);\r\n        });\r\n\r\n        this.close();\r\n\r\n        deleteProps(this);\r\n    }\r\n\r\n    static install(initial) {\r\n        if (!PhotoStory.prototype.__modules) {\r\n            PhotoStory.prototype.__modules = [];\r\n        }\r\n        const modules = PhotoStory.prototype.__modules;\r\n        if (typeof initial === 'function' && modules.indexOf(initial) < 0) {\r\n            modules.push(initial);\r\n        }\r\n    }\r\n\r\n    static module(module) {\r\n        if (Array.isArray(module)) {\r\n            module.forEach((m) => PhotoStory.install(m));\r\n            return PhotoStory;\r\n        }\r\n    }\r\n}\r\n\r\nObject.keys(prototypes).forEach((prototypeGroup) => {\r\n    Object.keys(prototypes[prototypeGroup]).forEach((protoMethod) => {\r\n        PhotoStory.prototype[protoMethod] = prototypes[prototypeGroup][protoMethod];\r\n    });\r\n});\r\n\r\nPhotoStory.module(Modules.Modules);\r\n\r\nexport default PhotoStory;"],"names":["typeName","checkPassiveListener","supportsPassive","opts","Object","defineProperty","get","window","addEventListener","removeEventListener","e","deleteProps","obj","object","keys","forEach","key","extend","args","options","defaults","length","assign","isObject","gallery","getCurrentObj","list","el","currentObj","size","Array","from","entries","values","indexOf","rel","getAttribute","dataset","galleryId","getFileType","value","imgReg","videoReg","test","getElement","isElement","jquery","document","querySelectorAll","getGallery","group","array","val","o","main","thumb","getThumb","title","getTitle","captions","psCaptions","push","getGalleryGroup","groupBy","element","getGalleryType","hasOwnProperty","call","gal","type","getRel","img","getElementsByTagName","isCollection","psThumb","psTitle","keyGetter","map","Map","item","collection","set","nodeType","constructor","prototype","toString","slice","HTMLCollection","isPrototypeOf","createEl","classes","tag","createElement","split","className","addClass","counter","getElementById","getIdName","innerHTML","currentIndex","downloadURL","tools","download","href","hasClass","getClassName","RegExp","removeClass","reg","replace","getCSSVariable","varName","root","getComputedStyle","documentElement","property","getPropertyValue","setCSS","varValue","style","setProperty","name","prefix","getChildByClassName","child","children","childEl","i","attachEvents","events","handler","event","namespaces","touch","passive","param","detachEvents","on","eventsListeners","off","eventHandler","index","splice","emit","data","enterFullscreen","doc","docEl","enter","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","ActiveXObject","shell","SendKeys","fullscreen","template","exitFullscreen","exit","cancelFullScreen","webkitCancelFullScreen","mozCancelFullScreen","webkitExitFullscreen","isEnter","fullScreenElement","mozFullScreen","webkitIsFullScreen","fadeIn","cb","duration","opacity","display","step","fade","currentOpacity","parseFloat","requestAnimationFrame","fadeOut","setSlides","console","log","Navigation","ps","moduleDefaults","navigation","next","prev","enable","nextEl","prevEl","init","ariaLabel","click","append","destroy","nav","Resize","Video","video","autoplay","frame","Modules","extendModuleDefaults","extendOptions","moduleOptionName","moduleOptions","enabled","showCounter","loop","bullets","loader","preload","effect","rtl","close","prototypes","dom","eventEmitter","animation","slide","PhotoStory","initial","String","alert","originalGallery","modules","__modules","bind","links","nodeName","anchor","getPrototypeOf","link","preventDefault","currentTarget","id","open","backdrop","toolbar","body","appendChild","galleryItems","html","build","tool","buttons","button","removeChild","eventName","module","isArray","m","install","prototypeGroup","protoMethod"],"mappings":"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"}